@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    box-sizing: border-box;
  }
  body {
    background-color: #0f0805;
    color: #c8b89a;
    font-family: 'Special Elite', 'Courier New', monospace;
    overflow: hidden;
    height: 100vh;
    height: 100dvh;
    width: 100vw;
  }
  #root {
    height: 100vh;
    height: 100dvh;
    width: 100vw;
    overflow: hidden;
  }
}

@layer components {
  .ballot-paper {
    background-color: #f4edd8;
    background-image:
      radial-gradient(ellipse at 20% 50%, rgba(200, 185, 160, 0.15) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(180, 165, 140, 0.1) 0%, transparent 50%);
    color: #1a1208;
    font-family: 'Noto Sans Devanagari', serif;
    position: relative;
  }

  .ballot-paper::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    border-radius: inherit;
  }

  .stamp-btn {
    @apply font-typewriter font-bold tracking-widest uppercase cursor-pointer select-none;
    @apply transition-all duration-150 active:scale-95;
    border-width: 4px;
    border-style: solid;
    letter-spacing: 0.15em;
  }

  .stamp-btn-valid {
    @apply stamp-btn;
    color: #22cc44;
    border-color: #22cc44;
    background: rgba(34, 204, 68, 0.07);
    box-shadow: 3px 3px 0 #22cc44, inset 0 0 0 1px rgba(34,204,68,0.15);
  }
  .stamp-btn-valid:hover {
    background: rgba(34, 204, 68, 0.15);
    box-shadow: 4px 4px 0 #22cc44, 0 0 18px rgba(34,204,68,0.18), inset 0 0 0 1px rgba(34,204,68,0.25);
  }

  .stamp-btn-invalid {
    @apply stamp-btn;
    color: #ee3333;
    border-color: #ee3333;
    background: rgba(238, 51, 51, 0.07);
    box-shadow: 3px 3px 0 #ee3333, inset 0 0 0 1px rgba(238,51,51,0.15);
  }
  .stamp-btn-invalid:hover {
    background: rgba(238, 51, 51, 0.15);
    box-shadow: 4px 4px 0 #ee3333, 0 0 18px rgba(238,51,51,0.18), inset 0 0 0 1px rgba(238,51,51,0.25);
  }

  .desk-surface {
    background-color: #0f0805;
    background-image:
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(255,255,255,0.005) 2px,
        rgba(255,255,255,0.005) 4px
      ),
      repeating-linear-gradient(
        180deg,
        transparent,
        transparent 40px,
        rgba(0,0,0,0.15) 40px,
        rgba(0,0,0,0.15) 41px
      );
  }

  .party-symbol {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.65rem;
    line-height: 1;
    filter: grayscale(1) brightness(0.12) contrast(1.6);
    user-select: none;
  }

  .vote-mark {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-8deg);
    font-size: 1.6rem;
    font-weight: 900;
    color: #1a2ecc;
    font-family: 'Courier Prime', monospace;
    pointer-events: none;
    text-shadow:
      0 0 3px #fff, 0 0 6px #fff,
      1px 0 0 #fff, -1px 0 0 #fff,
      0 1px 0 #fff, 0 -1px 0 #fff;
    z-index: 10;
    line-height: 0;
    width: 2.4rem;
    height: 2.4rem;
    border: 2.5px solid #1a2ecc;
    box-shadow: 0 0 0 1.5px rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .vote-mark-sloppy {
    transform: translate(-50%, -50%) rotate(14deg) skewX(-6deg);
    font-size: 1.5rem;
    opacity: 0.88;
  }

  .vote-mark-smudged {
    filter: blur(2.5px);
    width: 3.2rem;
    height: 3.2rem;
    font-size: 2rem;
    color: rgba(8, 16, 140, 0.82);
    border-color: rgba(8, 16, 140, 0.55);
    box-shadow:
      0 0 10px 8px rgba(8, 16, 140, 0.22),
      0 0 3px 2px rgba(8, 16, 140, 0.45);
    opacity: 0.92;
  }

  /* Mark straddling the right border between two cells */
  .vote-mark-border-right {
    position: absolute;
    top: 50%;
    right: -1rem;
    transform: translateY(-50%) rotate(-5deg);
    font-size: 1.5rem;
    font-weight: 900;
    color: #1a2ecc;
    font-family: 'Courier Prime', monospace;
    pointer-events: none;
    text-shadow:
      0 0 3px #fff, 0 0 6px #fff,
      1px 0 0 #fff, -1px 0 0 #fff,
      0 1px 0 #fff, 0 -1px 0 #fff;
    z-index: 20;
    line-height: 0;
    width: 2rem;
    height: 2rem;
    border: 2px solid #1a2ecc;
    box-shadow: 0 0 0 1.5px rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Mark straddling the bottom border between two cells */
  .vote-mark-border-bottom {
    position: absolute;
    bottom: -1rem;
    left: 50%;
    transform: translateX(-50%) rotate(-8deg);
    font-size: 1.5rem;
    font-weight: 900;
    color: #1a2ecc;
    font-family: 'Courier Prime', monospace;
    pointer-events: none;
    text-shadow:
      0 0 3px #fff, 0 0 6px #fff,
      1px 0 0 #fff, -1px 0 0 #fff,
      0 1px 0 #fff, 0 -1px 0 #fff;
    z-index: 20;
    line-height: 0;
    width: 2rem;
    height: 2rem;
    border: 2px solid #1a2ecc;
    box-shadow: 0 0 0 1.5px rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .torn-corner-tr {
    position: absolute;
    top: 0;
    right: 0;
    width: 110px;
    height: 110px;
    background: transparent;
    clip-path: polygon(100% 0, 100% 100%, 0 0);
    z-index: 30;
  }

  .torn-corner-tr::before {
    content: '';
    position: absolute;
    top: -2px;
    right: -2px;
    width: 120px;
    height: 120px;
    background: #0f0805;
    clip-path: polygon(100% 0, 100% 115%, -15% 0);
  }

  .torn-corner-br {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 110px;
    height: 110px;
    z-index: 30;
  }

  .torn-corner-br::before {
    content: '';
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 120px;
    height: 120px;
    background: #0f0805;
    clip-path: polygon(100% 100%, 115% -15%, 100% -15%);
  }

  .torn-corner-tl {
    position: absolute;
    top: 0;
    left: 0;
    width: 120px;
    height: 100px;
    z-index: 30;
  }

  .torn-corner-tl::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    width: 130px;
    height: 110px;
    background: #0f0805;
    clip-path: polygon(0 0, 115% 0, 0 115%);
  }

  .identifying-text {
    position: absolute;
    font-family: 'Courier Prime', monospace;
    font-size: 0.9rem;
    font-weight: bold;
    color: #1818b0;
    opacity: 0.88;
    transform: rotate(-12deg);
    pointer-events: none;
    z-index: 15;
    white-space: nowrap;
    font-style: italic;
    text-shadow: 0 0 1px rgba(20, 20, 180, 0.25);
  }

  .fingerprint-stamp {
    position: absolute;
    pointer-events: none;
    z-index: 15;
    color: rgba(140, 35, 10, 0.6);
    transform: rotate(-18deg);
    filter: blur(0.4px) contrast(1.1);
    mix-blend-mode: multiply;
  }
}

/* Scanline effect for Papers Please aesthetic */
.scanlines {
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.03) 2px,
    rgba(0, 0, 0, 0.03) 4px
  );
  pointer-events: none;
  z-index: 9999;
}

/* Custom scrollbar for rules panel */
.rules-scroll::-webkit-scrollbar {
  width: 4px;
}
.rules-scroll::-webkit-scrollbar-track {
  background: #1a1208;
}
.rules-scroll::-webkit-scrollbar-thumb {
  background: #3a2a18;
  border-radius: 2px;
}

/* Hide scrollbar on mobile ballot scroll area */
.ballot-scroll-area::-webkit-scrollbar {
  display: none;
}
.ballot-scroll-area {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

/* ── Flip Clock — only keyframes needed; all other styles are Tailwind ── */
.fc-flap-top { animation: fcTopAway 0.3s ease-in  forwards; }
.fc-flap-bot { animation: fcBotIn   0.28s ease-out forwards; }

@keyframes fcTopAway {
  from { transform: rotateX(0deg);   }
  to   { transform: rotateX(-90deg); }
}
@keyframes fcBotIn {
  from { transform: rotateX(90deg);  }
  to   { transform: rotateX(0deg);   }
}

/* ── Mobile overrides ── */
@media (max-width: 767px) {
  body {
    overflow-x: hidden;
    overflow-y: auto;
    height: auto;
    min-height: 100dvh;
  }
  #root {
    height: auto;
    min-height: 100dvh;
    overflow: auto;
  }
  .vote-mark {
    font-size: 1.1rem;
    width: 1.5rem;
    height: 1.5rem;
  }
  .vote-mark-sloppy {
    font-size: 1.1rem;
    width: 1.5rem;
    height: 1.5rem;
  }
  .vote-mark-smudged {
    font-size: 1.4rem;
    width: 2rem;
    height: 2rem;
  }
  .vote-mark-border-right {
    font-size: 1.1rem;
    right: -0.75rem;
    width: 1.5rem;
    height: 1.5rem;
  }
  .vote-mark-border-bottom {
    font-size: 1.1rem;
    bottom: -0.75rem;
    width: 1.5rem;
    height: 1.5rem;
  }
  .party-symbol {
    font-size: 1.1rem;
  }
  .torn-corner-tr,
  .torn-corner-br {
    width: 70px;
    height: 70px;
  }
  .torn-corner-tr::before {
    width: 80px;
    height: 80px;
  }
  .torn-corner-br::before {
    width: 80px;
    height: 80px;
  }
  .torn-corner-tl {
    width: 76px;
    height: 66px;
  }
  .torn-corner-tl::before {
    width: 86px;
    height: 76px;
  }
}
